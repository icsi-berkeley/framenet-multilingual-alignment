(this["webpackJsonpmlfn-alignment-visualizer"]=this["webpackJsonpmlfn-alignment-visualizer"]||[]).push([[0],{103:function(e,t,n){},104:function(e,t,n){},106:function(e,t,n){},107:function(e,t,n){},108:function(e,t,n){},109:function(e,t,n){},110:function(e,t,n){},111:function(e,t,n){},112:function(e,t,n){},115:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(21),s=n.n(i),o=(n(90),n(75)),c=(n(91),n(92),n(4)),u=n(5),l=n(8),h=n(7),d=n(12),f=n(47),m=(n(93),n(29)),p=n(28),y=n(13),g=n.n(y),b=n(69),v=n.n(b),k=n(31),O=n(120),E=n(20),x={version:"1.1.8",bP:function(){var e,t,n,r,a,i,s,o,c,u,l,h,d,f,m,p,y;function g(e){h=e,e.each((function(){var e=E.d(this),t=g.bars(),n=e.selectAll(".subBars").data(t.subBars).enter().append("g").attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).attr("class","subBars").append("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O);"undefined"!==typeof l&&n.style("fill",(function(e){return l(e)}));var r=e.selectAll(".edges").data(t.edges).enter().append("path").attr("class","edges").attr("d",(function(e){return e.path})).style("fill-opacity",g.edgeOpacity());"undefined"!==typeof l&&r.style("fill",(function(e){return l(e)})),e.selectAll(".mainBars").data(t.mainBars).enter().append("g").attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).attr("class","mainBars").append("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O).style("fill-opacity",0)}))}function b(e){return-e.width}function v(e){return-e.height}function k(e){return 2*e.width}function O(e){return 2*e.height}return g.data=function(e){return arguments.length?(u=e,g):u},g.fill=function(e){return arguments.length?(l=e,g):l},g.keyPrimary=function(t){return arguments.length?(e=t,g):"undefined"!==typeof e?e:function(e){return e[0]}},g.sortPrimary=function(e){return arguments.length?(m=e,g):"undefined"!==typeof m?m:E.a},g.keySecondary=function(e){return arguments.length?(t=e,g):"undefined"!==typeof t?t:function(e){return e[1]}},g.sortSecondary=function(e){return arguments.length?(p=e,g):"undefined"!==typeof p?p:E.a},g.value=function(e){return arguments.length?(n=e,g):"undefined"!==typeof n?n:function(e){return e[2]}},g.width=function(e){return arguments.length?(r=e,g):"undefined"!==typeof r?r:400},g.height=function(e){return arguments.length?(a=e,g):"undefined"!==typeof a?a:600},g.barSize=function(e){return arguments.length?(s=e,g):"undefined"!==typeof s?s:35},g.min=function(e){return arguments.length?(o=e,g):"undefined"!==typeof o?o:0},g.orient=function(e){return arguments.length?(i=e,g):"undefined"!==typeof i?i:"vertical"},g.pad=function(e){return arguments.length?(c=e,g):"undefined"!==typeof c?c:0},g.duration=function(e){return arguments.length?(f=e,g):"undefined"!==typeof f?f:500},g.edgeOpacity=function(e){return arguments.length?(d=e,g):"undefined"!==typeof d?d:.4},g.edgeMode=function(e){return arguments.length?(y=e,g):"undefined"!==typeof y?y:"curved"},g.bars=function(e){var t={primary:[],secondary:[]},n={primary:[],secondary:[]},r={primary:g.keyPrimary(),secondary:g.keySecondary()},a=g.orient();return s("primary"),s("secondary"),o("primary"),o("secondary"),function(){var e=g.min()/2;t.primary.forEach((function(t){t.height<e&&(t.height=e)})),t.secondary.forEach((function(t){t.height<e&&(t.height=e)}))}(),{mainBars:t.primary.concat(t.secondary),subBars:n.primary.concat(n.secondary),edges:function(){var e=E.b(n.secondary,(function(e){return e.index})),t=g.edgeMode();return n.primary.map((function(t){var n=e.get(t.index);return{path:"vertical"===a?r(t.x+t.width,t.y+t.height,n.x-n.width,n.y+n.height,n.x-n.width,n.y-n.height,t.x+t.width,t.y-t.height):i(t.x-t.width,t.y+t.height,n.x-n.width,n.y-n.height,n.x+n.width,n.y-n.height,t.x+t.width,t.y+t.height),primary:t.primary,secondary:t.secondary,value:t.value,percent:t.percent}}));function r(e,n,r,a,i,s,o,c){if("straight"===t)return["M",e,",",n,"L",r,",",a,"L",i,",",s,"L",o,",",c,"z"].join("");var u=(e+r)/2,l=(i+o)/2;return["M",e,",",n,"C",u,",",n," ",u,",",a,",",r,",",a,"L",i,",",s,"C",l,",",s," ",l,",",c,",",o,",",c,"z"].join("")}function i(e,n,r,a,i,s,o,c){if("straight"===t)return["M",e,",",n,"L",r,",",a,"L",i,",",s,"L",o,",",c,"z"].join("");var u=(n+a)/2,l=(s+c)/2;return["M",e,",",n,"C",e,",",u," ",r,",",u,",",r,",",a,"L",i,",",s,"C",i,",",l," ",o,",",l,",",o,",",c,"z"].join("")}}()};function i(t,n){return"undefined"===typeof e||e.part===n||r[e.part](t)===e.key}function s(e){function n(t){return i(t,e)?g.value()(t):0}var r=E.c().key("primary"===e?g.keyPrimary():g.keySecondary()).sortKeys("primary"===e?g.sortPrimary():g.sortSecondary()).rollup((function(e){return E.e(e,n)})).entries(g.data()),s=c(r,g.pad(),g.min(),0,"vertical"===a?g.height():g.width()),o=g.barSize();r.forEach((function(n,r){t[e].push({x:"horizontal"===a?(s[r].s+s[r].e)/2:"primary"===e?o/2:g.width()-o/2,y:"vertical"===a?(s[r].s+s[r].e)/2:"primary"===e?o/2:g.height()-o/2,height:"vertical"===a?(s[r].e-s[r].s)/2:o/2,width:"horizontal"===a?(s[r].e-s[r].s)/2:o/2,part:e,key:n.key,value:n.value,percent:s[r].p})}))}function o(e){function r(t){return i(t,e)?g.value()(t):0}var s=E.b(t[e],(function(e){return e.key}));E.c().key("primary"===e?g.keyPrimary():g.keySecondary()).sortKeys("primary"===e?g.sortPrimary():g.sortSecondary()).key("secondary"===e?g.keyPrimary():g.keySecondary()).sortKeys("secondary"===e?g.sortPrimary():g.sortSecondary()).rollup((function(e){return E.e(e,r)})).entries(g.data()).forEach((function(t){var r=s.get(t.key),i=c(t.values,0,0,"vertical"===a?r.y-r.height:r.x-r.width,"vertical"===a?r.y+r.height:r.x+r.width),o=g.barSize();t.values.forEach((function(s,c){n[e].push({x:"vertical"===a?"primary"===e?o/2:g.width()-o/2:(i[c].s+i[c].e)/2,y:"horizontal"===a?"primary"===e?o/2:g.height()-o/2:(i[c].s+i[c].e)/2,height:("vertical"===a?i[c].e-i[c].s:o)/2,width:("horizontal"===a?i[c].e-i[c].s:o)/2,part:e,primary:"primary"===e?t.key:s.key,secondary:"primary"===e?s.key:t.key,value:s.value,percent:i[c].p*r.percent,index:"primary"===e?t.key+"|"+s.key:s.key+"|"+t.key})}))}))}function c(e,t,n,r,a){var i=n/(a-r-2*e.length*t),s=0,o=0,c=E.e(e,(function(e){return e.value}));e.forEach((function(e){e.value<i*c&&(s+=1,o+=e.value)}));var u=c<1e-5?0:(a-r-2*e.length*t-s*n)/(c-o),l=r,h=[];return e.forEach((function(e){var r=e.value*u;h.push({s:l+t+(r<n?.5*(n-r):0),e:l+t+(r<n?.5*(n+r):r),p:c<1e-5?0:e.value/c}),l+=2*t+(r<n?n:r)})),h}},g.update=function(e){u=e;var t=g.bars(),n=g.duration();h.selectAll(".subBars").data(t.subBars).transition().duration(n).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O),h.selectAll(".edges").data(t.edges).transition().duration(n).attr("d",(function(e){return e.path})).style("fill-opacity",g.edgeOpacity()).style("visibility","visible"),h.selectAll(".mainBars").data(t.mainBars).transition().duration(n).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O).style("visibility","hidden")},g.mouseover=function(e){var t=g.bars(e);h.selectAll(".mainBars").filter((function(t){return t.part===e.part&&t.key===e.key})).select("rect").style("stroke-opacity",1),h.selectAll(".subBars").data(t.subBars).transition().duration(g.duration()).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O);var n=h.selectAll(".edges").data(t.edges);n.filter((function(t){return t[e.part]===e.key})).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).style("visibility","visible").attr("d",(function(e){return e.path})),n.filter((function(t){return t[e.part]!==e.key})).transition().duration(g.duration()).style("visibility","hidden").attr("d",(function(e){return e.path})),h.selectAll(".mainBars").data(t.mainBars).transition().duration(g.duration()).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O)},g.mouseout=function(e){var t=g.bars();h.selectAll(".mainBars").filter((function(t){return t.part===e.part&&t.key===e.key})).select("rect").style("stroke-opacity",0),h.selectAll(".subBars").data(t.subBars).transition().duration(g.duration()).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O),h.selectAll(".edges").data(t.edges).transition().duration(g.duration()).style("fill-opacity",g.edgeOpacity()).style("visibility","visible").attr("d",(function(e){return e.path})),h.selectAll(".mainBars").data(t.mainBars).transition().duration(g.duration()).attr("transform",(function(e){return"translate("+e.x+","+e.y+")"})).select("rect").attr("x",b).attr("y",v).attr("width",k).attr("height",O)},g}},S=x,w=(n(95),n(14)),j=n(39),C=n(1),N=n(68),M={attr_matching:{threshold:0,displayOnlyFrameSet:!0,sankeyMaxEdges:null,limitSankeyEdges:!1},lu_wordnet:{threshold:.4,displayOnlyFrameSet:!1,sankeyMaxEdges:null,limitSankeyEdges:!1},lu_muse:{threshold:.75,displayOnlyFrameSet:!1,sankeyMaxEdges:5,limitSankeyEdges:!0,neighborhoodSize:5,similarityThreshold:.3},lu_mean_muse:{threshold:.85,displayOnlyFrameSet:!1,sankeyMaxEdges:5,limitSankeyEdges:!0},lu_bert:{threshold:.4,displayOnlyFrameSet:!1,sankeyMaxEdges:5,limitSankeyEdges:!0,neighborhoodSize:5,similarityThreshold:.3}},L=new Set(["fe_matching","muse_fe_matching"]),B=new Set(["lu_wordnet","synset","synset_inv","lu_muse","lu_bert","lu_mean_muse"]),P=function(){return new Promise((function(e){return setTimeout(e)}))},F=function(){var e=Object(j.a)(g.a.mark((function e(t){var n,r,a,i,s,o,c,u,l;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={},r=0,a=performance.now(),i=0;case 4:if(!(i<t.alignments.length)){e.next=30;break}if(s=t.alignments[i].data,o=[],!s){e.next=27;break}c=0;case 9:if(!(c<s.length)){e.next=26;break}u=0;case 11:if(!(u<s[c].length)){e.next=23;break}if((l=s[c][u])>0&&o.push([t.indices[0][c],t.indices[1][u],l]),++r%1e3!==0){e.next=20;break}if(!(performance.now()-a>100)){e.next=20;break}return e.next=19,P();case 19:a=performance.now();case 20:++u,e.next=11;break;case 23:++c,e.next=9;break;case 26:n[t.alignments[i].id]=o;case 27:i++,e.next=4;break;case 30:return e.abrupt("return",n);case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e,t){return e.size===t.size&&Object(m.a)(e).every((function(e){return t.has(e)}))},V=function(){function e(t){var n=this;Object(c.a)(this,e),this.edges={},this.indices=[],this.frames={},this.framesByName={},this.synsetsByLU={},this.synsetData={},this.museVectorIdsByLU=[],this.museWordsByVectorId=[],this.bertVectorIdsByLU=[],this.bertWordsByVectorId=[],this.frameVectorCache={},this.previousParams={},this.isLoading=!1,this.asyncSankeyData=Object(N.asyncComputed)([],200,Object(j.a)(g.a.mark((function e(){var t,r,a,i,s,o,c,u,l,h,d,f;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.uiState,r=t.scoring,a=t.sankeyFrames,!r){e.next=17;break}return i=n.frames,s=r.params,o=s.displayOnlyFrameSet,c=s.threshold,s.neighborhoodSize,s.similarityThreshold,s.limitSankeyEdges,s.sankeyMaxEdges,e.next=7,new Promise((function(e){return setTimeout(e,1e3)}));case 7:return u=new Set(a.map((function(e){return e.id}))),l=o?function(e){return u.has(e[0])&&u.has(e[1])&&e[2]>=c}:function(e){return(u.has(e[0])||u.has(e[1]))&&e[2]>=c},e.next=11,n.getEdges(u);case 11:return h=e.sent,d=h.filter(l),f=n.pruneEdges(d).map((function(e){return[i[e[0]].name+"."+i[e[0]].language,i[e[1]].name+"."+i[e[1]].language,e[2]]})),e.abrupt("return",f);case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e)})))),this.createNode=function(){return{inDegree:0,outDegree:0}},this.load=Object(C.flow)(g.a.mark((function e(t){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.fndb=t.db[1],this.language=t.lang[1],e.next=4,F(t);case 4:for(n in this.edges=e.sent,this.framesByName={},t.frames)Object.prototype.hasOwnProperty.call(t.frames,n)&&(r=t.frames[n],this.framesByName[r.name+"."+r.language]=r);this.uiState.scoringOptions=t.alignments.map((function(e){return{id:e.id,desc:e.desc,type:e.type,params:M[e.type]||{threshold:.1,displayOnlyFrameSet:!1,sankeyMaxEdges:null,limitSankeyEdges:!1}}})),this.indices=t.indices,this.frames=t.frames,this.synsetsByLU=t.resources.lu_to_syn,this.synsetData=t.resources.syn_data,this.museVectorIdsByLU=t.resources.lu_vec_nn_muse,this.museWordsByVectorId=t.resources.id2word_muse,this.bertVectorIdsByLU=t.resources.lu_vec_nn_bert,this.bertWordsByVectorId=t.resources.id2word_bert,this.uiState.setSelectedFramePair(null,null),this.uiState.scoring=null,this.uiState.sankeyFrames=[];case 19:case"end":return e.stop()}}),e,this)}))),this.uiState=t}return Object(u.a)(e,[{key:"getEdges",value:function(){var e=Object(j.a)(g.a.mark((function e(t){var n,r,a,i,s,o,c,u;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.uiState.scoring,r=n.params,a=this.previousParams[n.id]||{},"lu_muse"!==n.type&&this.edges[n.id]){e.next=25;break}s=!1,o=0,c=["neighborhoodSize","similarityThreshold"];case 6:if(!(o<c.length)){e.next=14;break}if(u=c[o],a[u]===r[u]){e.next=11;break}return s=!0,e.abrupt("break",14);case 11:o++,e.next=6;break;case 14:if(s||(s=!D(a.frameSet,t)),!s){e.next=22;break}return e.next=18,this.computeEdges(t);case 18:i=e.sent,this.edges[n.id]=i,e.next=23;break;case 22:i=this.edges[n.id];case 23:e.next=26;break;case 25:i=this.edges[n.id];case 26:return this.previousParams[n.id]=Object(w.a)({},r),this.previousParams[n.id].frameSet=t,e.abrupt("return",i);case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"computeEdges",value:function(){var e=Object(j.a)(g.a.mark((function e(t){var n,r,a,i,s,o,c,u,l,h,d;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=[this.indices[0].filter((function(e){return!t.has(e)})),this.indices[1]],a=Object(p.a)(t),e.prev=3,a.s();case 5:if((i=a.n()).done){e.next=22;break}if(s=i.value,0!==(o=this.frames[s]).LUs.length){e.next=10;break}return e.abrupt("continue",20);case 10:if(c=void 0,u=0,l=performance.now(),"en"===o.language)for(h=0;h<r[1].length;++h)c=r[1][h],n.push([o.gid,c,this.LUVectorMatchingScore(o,this.frames[c])]),++u;else for(d=0;d<r[0].length;++d)c=r[0][d],n.push([c,o.gid,this.LUVectorMatchingScore(this.frames[c],o)]),++u;if(++u%1e4!==0){e.next=20;break}if(!(performance.now()-l>100)){e.next=20;break}return e.next=19,P();case 19:l=performance.now();case 20:e.next=5;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(3),a.e(e.t0);case 27:return e.prev=27,a.f(),e.finish(27);case 30:return this.frameVectorCache={},e.abrupt("return",n.filter((function(e){return e[2]>0})));case 32:case"end":return e.stop()}}),e,this,[[3,24,27,30]])})));return function(t){return e.apply(this,arguments)}}()},{key:"LUVectorMatchingScore",value:function(e,t){var n=this,r=this.uiState.scoring.params;return this.frameVectorCache[e.gid]||(this.frameVectorCache[e.gid]=e.LUs.map((function(e){return n.museVectorIdsByLU[e.gid]})).filter((function(e){return e})).map((function(e){return e.filter((function(e){return e[0]>=r.similarityThreshold})).slice(0,r.neighborhoodSize)}))),this.frameVectorCache[t.gid]||(this.frameVectorCache[t.gid]=new Set(t.LUs.flatMap((function(e){return n.museVectorIdsByLU[e.gid]})).filter((function(e){return e})).map((function(e){return e[1]})))),this.frameVectorCache[e.gid].filter((function(e){return e&&e.some((function(e){return n.frameVectorCache[t.gid].has(e[1])}))})).length/e.LUs.length}},{key:"LUWordNetGraph",value:function(){var e=this.getNodes(),t=this.getConnectionObjects(e,this.synsetsByLU),n=t.links.filter((function(e){return e.target.hasLeftSource}));return e.push.apply(e,Object(m.a)(t.nodes.filter((function(e){return e.hasLeftSource})))),n.filter((function(e){return"right"===e.source.type})).forEach((function(e){var t=e.source;e.source=e.target,e.target=t})),e.forEach((function(e){return e.isReferenceNode="left"===e.type})),n.filter((function(e){return"left"===e.source.type&&e.target.isIntersection})).forEach((function(e){e.source.isMatchingNode=!0})),this.computeDegrees(n),{nodes:e,links:n}}},{key:"synsetGraph",value:function(){var e=this.uiState.scoring.type,t=this.getNodes(),n=this.getConnectionObjects(t,this.synsetsByLU),r=n.links;t.push.apply(t,Object(m.a)(n.nodes));var a="synset"===e?function(e){return e.hasLeftSource}:function(e){return e.hasRightSource};return t.forEach((function(e){e.isReferenceNode=a(e),e.isMatchingNode=e.isIntersection})),this.computeDegrees(r),{nodes:t,links:r}}},{key:"LUMuseGraph",value:function(){var e=this,t=this.getNodes(),n=this.getConnectionObjects(t,this.museVectorIdsByLU,(function(t){return e.museWordsByVectorId[t]})),r=n.links.filter((function(e){return e.target.hasLeftSource}));return t.push.apply(t,Object(m.a)(n.nodes.filter((function(e){return e.hasLeftSource})))),r.filter((function(e){return"right"===e.source.type})).forEach((function(e){var t=e.source;e.source=e.target,e.target=t})),t.forEach((function(e){return e.isReferenceNode="left"===e.type})),r.filter((function(e){return"left"===e.source.type&&e.target.isIntersection})).forEach((function(e){return e.source.isMatchingNode=!0})),this.computeDegrees(r),{nodes:t,links:r}}},{key:"LUBertGraph",value:function(){var e,t=this,n=this.uiState.scoring.params,r=this.getNodes(),a=r.filter((function(e){return"left"===e.type})),i=r.filter((function(e){return"right"===e.type})),s=[],o=Object(p.a)(a);try{for(o.s();!(e=o.n()).done;){var c=e.value;c.isReferenceNode=!0;var u,l=(this.bertVectorIdsByLU[c.gid]||[]).slice(0,n.neighborhoodSize).filter((function(e){return!Array.isArray(e)||e[0]>n.similarityThreshold})).map((function(e){return t.bertWordsByVectorId[Array.isArray(e)?e[1]:e]})).filter((function(e){return e})),h=Object(p.a)(i);try{for(h.s();!(u=h.n()).done;){var d=u.value,f=d.gid.replace(/\d+\.\w{2}\./,"");l.indexOf(f)>-1&&(s.push({source:c,target:d}),c.isMatchingNode=!0)}}catch(m){h.e(m)}finally{h.f()}}}catch(m){o.e(m)}finally{o.f()}return{nodes:r,links:s}}},{key:"FEMatchingGraph",value:function(){var e=this.getNodes("FEs",(function(e){return e.name})),t=[];e.forEach((function(e){return e.isReferenceNode=!0}));var n,r=e.filter((function(e){return"left"===e.type})),a=e.filter((function(e){return"right"===e.type})),i=Object(p.a)(r);try{for(i.s();!(n=i.n()).done;){var s,o=n.value,c=Object(p.a)(a);try{for(c.s();!(s=c.n()).done;){var u=s.value;o.type!==u.type&&o.name===u.name&&(t.push({source:o,target:u}),o.isMatchingNode=!0,u.isMatchingNode=!0)}}catch(l){c.e(l)}finally{c.f()}}}catch(l){i.e(l)}finally{i.f()}return{nodes:e,links:t}}},{key:"getNodes",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LUs",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e.name},r=this.uiState.selectedFrames;return r[0]&&r[1]?this.frames[r[0]][t].map((function(t){return Object(w.a)(Object(w.a)(Object(w.a)({type:"left"},e.createNode()),"object"===typeof t?t:null),{},{name:n(t)})})).concat(this.frames[r[1]][t].map((function(t){return Object(w.a)(Object(w.a)(Object(w.a)({type:"right"},e.createNode()),"object"===typeof t?t:null),{},{name:n(t)})}))):[]}},{key:"getConnectionObjects",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},a=this.uiState.scoring.params,i=e.flatMap((function(e){return(t[e.gid]||[]).slice(0,a.neighborhoodSize).filter((function(e){return!Array.isArray(e)||e[0]>a.similarityThreshold})).map((function(t){return{source:e,target:Array.isArray(t)?t[1]:t,isDirected:!0}}))})),s={},o=Object(m.a)(new Set(i.map((function(e){return e.target})))).map((function(e){var t=Object(w.a)(Object(w.a)({type:"intermediate"},n.createNode()),{},{name:r(e)});return s[e]=t,t}));return i.forEach((function(e){e.target=s[e.target],e.target["left"===e.source.type?"hasLeftSource":"hasRightSource"]=!0})),o.forEach((function(e){return e.isIntersection=e.hasLeftSource&&e.hasRightSource})),{nodes:o,links:i}}},{key:"computeDegrees",value:function(e){e.forEach((function(e){++e.source.outDegree,++e.target.inDegree}))}},{key:"pruneEdges",value:function(e){var t=this.uiState.scoring.params;if(!t.limitSankeyEdges)return e;e.sort((function(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:e[2]>t[2]?-1:e[2]<t[2]?1:0}));var n={};return e.forEach((function(e){return n[e[0]]=0})),e.filter((function(e){return++n[e[0]],n[e[0]]<=t.sankeyMaxEdges}))}},{key:"sankeyData",get:function(){return this.asyncSankeyData.get()}},{key:"isComputingSankey",get:function(){return this.asyncSankeyData.busy}},{key:"lexicalIndices",get:function(){var e=this;return this.indices.map((function(t){return t.filter((function(t){return e.frames[t].LUs.length>0}))}))}},{key:"frameOptions",get:function(){var e=this,t=this.uiState.scoring,n=this.indices.flat().map((function(t){return{id:t,label:e.frames[t].name+"."+e.frames[t].language,disabled:!1}})).sort((function(e,t){return e.label<t.label?-1:e.label>t.label?1:0}));return t&&L.has(t.type)?n.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{disabled:0===e.frames[t.id].FEs.length})})):t&&B.has(t.type)?n.map((function(t){return Object(w.a)(Object(w.a)({},t),{},{disabled:0===e.frames[t.id].LUs.length})})):n}},{key:"graphData",get:function(){var e=this.uiState.scoring;if(!e)return{nodes:[],links:[]};switch(e.type){case"lu_wordnet":return this.LUWordNetGraph();case"synset":case"synset_inv":return this.synsetGraph();case"lu_muse":return this.LUMuseGraph();case"lu_bert":return this.LUBertGraph();case"fe_matching":return this.FEMatchingGraph();default:return{nodes:[],links:[]}}}}]),e}();Object(C.decorate)(V,{fndb:C.observable,language:C.observable,indices:C.observable,frames:C.observable,synsetsByLU:C.observable,synsetData:C.observable,museVectorIdsByLU:C.observable,museWordsByVectorId:C.observable,bertVectorIdsByLU:C.observable,bertWordsByVectorId:C.observable,isLoading:C.observable,lexicalIndices:C.computed,sankeyData:C.computed,isComputingSankey:C.computed,frameOptions:C.computed});var A=V;var _=Object(k.a)(".3f"),z=g.a.mark((function(){var e,t;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=["#3366CC","#DC3912","#FF9900","#109618","#990099","#0099C6"],t=0;case 2:return n.next=5,e[t];case 5:t=++t%e.length,n.next=2;break;case 8:case"end":return n.stop()}}),e)})),U=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(e){var r;return Object(c.a)(this,n),(r=t.call(this,e)).svg=null,r.selection=null,r.bP=null,r.bPg=null,r.height=null,r.width=null,r}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.renderSankey()}},{key:"componentDidUpdate",value:function(){this.renderSankey()}},{key:"onNodeClick",value:function(e){this.selection&&this.selection.key===e.key?(this.shrink(this.selection),this.selection=null):(this.selection&&this.shrink(this.selection),this.selection=e,this.expand(e))}},{key:"onEdgeClick",value:function(e){var t=this.props,n=t.store,r=t.onEdgeClick;r(n.framesByName[e.primary],n.framesByName[e.secondary])}},{key:"expand",value:function(e){var t="primary"===e.part?function(t){return e.key===t.primary}:function(t){return e.key===t.secondary};this.bP.mouseover(e),this.bPg.selectAll(".score").filter(t).text((function(e){return _(e.value)}))}},{key:"shrink",value:function(e){this.bP.mouseout(e),this.bPg.selectAll(".score").text("")}},{key:"getLabelSize",value:function(){var e,t=this.props.store,n=t.sankeyData[0],r=Object(p.a)(t.sankeyData);try{for(r.s();!(e=r.n()).done;){var a=e.value;a[0].length>n.length&&(n=a[0]),a[1].length>n.length&&(n=a[1])}}catch(i){r.e(i)}finally{r.f()}return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=document.createElement("canvas"),a=r.getContext("2d");return a.font=n?"".concat(t,"px ").concat(n):a.font.replace(/\d+px/,"".concat(t,"px")),a.measureText(e).width}(n,14)}},{key:"getColorMap",value:function(){var e=this.props.store,t=z();return Object(m.a)(new Set(e.sankeyData.map((function(e){return e[0]})))).reduce((function(e,n){return e[n]=t.next().value,e}),{})}},{key:"renderSankey",value:function(){var e=this,t=this.props.store,n=this.getLabelSize(),r=this.getColorMap(),a=Object(O.a)(this.svg);a.select("*").remove(),a.attr("width",this.width).attr("height",this.height);var i=Math.max(this.height-160,400),s=Math.max((this.height-i)/2,0),o=Math.min(600,Math.max(this.width-2*n-160,200)),c=Math.max((this.width-o)/2,0),u=a.append("g").attr("transform","translate(".concat(c,", ").concat(s,")"));this.bP=S.bP().data(t.sankeyData).min(12).pad(1).height(i).width(o).fill((function(e){return r[e.primary]})),this.bPg=u.call(this.bP),this.bPg.selectAll(".mainBars").on("click",(function(t){return e.onNodeClick(t)})),this.bPg.selectAll(".edges").on("click",(function(t){return e.onEdgeClick(t)})),this.bPg.selectAll(".subBars").filter((function(e){return"secondary"===e.part})).append("text").attr("class","score").attr("x",-58).attr("y",6),this.bPg.selectAll(".mainBars").append("text").attr("class","label").attr("x",(function(e){return"primary"===e.part?-30:30})).attr("y",(function(){return 6})).text((function(e){return e.key})).attr("text-anchor",(function(e){return"primary"===e.part?"end":"start"}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.uiState,i=n.sankeyData;return this.height=r.height,this.width=r.width,a.a.createElement("div",{className:"visualization-container",style:{minWidth:r.width}},i.length>0?a.a.createElement("svg",{ref:function(t){return e.svg=t}}):a.a.createElement("h3",{className:"no-data-text"},"No data to show."),n.isComputingSankey&&a.a.createElement("div",{className:"loading-overlay"},a.a.createElement("div",{className:"loading-box"},a.a.createElement("span",null,"Computing"),a.a.createElement(v.a,{height:"24px",color:"#3F51B5"}))))}}]),n}(a.a.Component)),I=(n(103),n(19)),R=(n(104),Object(k.a)(".3f")),T=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).root=null,e.links=null,e.nodes=null,e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.renderGraph()}},{key:"componentDidUpdate",value:function(){this.renderGraph()}},{key:"computePath",value:function(e){var t,n=e.source.x,r=e.source.y-e.source.height/4,a=e.target.x,i=e.target.y-e.target.height/4;"left"===e.source.type?(n+=e.source.width+12,a-=e.target.width/2+16,t=1):"intermediate"===e.source.type?(n+=e.source.width/2+12,a-=e.target.width+16,t=1):(n-=e.source.width+12,a+=e.target.width/2+18,t=-1);var s=(Math.abs(n-a)-30)/2.25;return"\n\t\t\tM ".concat(n,"                 ").concat(r,"\n\t\t\tL ").concat(n+3*t,"   ").concat(r,"\n\t\t\tC ").concat(n+s*t," ").concat(r,", ").concat(a-s*t," ").concat(i,", ").concat(a+15*-t," ").concat(i,"\n\t\t\tL ").concat(a,"                 ").concat(i,"\n\t\t")}},{key:"includeFooter",value:function(e){var t=this.props,n=t.framePair,r=t.height,a=t.width,i=t.margin,s=Object(O.a)(this.root).select("svg"),o=e.nodes.filter((function(e){return e.isMatchingNode})).length,c=e.nodes.filter((function(e){return e.isReferenceNode&&!e.isMatchingNode})).length;if(n[0]&&n[1]){var u=n[0],l=n[1];s.select("#title").attr("x",i).attr("y",r-i/2).attr("class","graph-info").text("Frames: ".concat(u.name," (").concat(u.gid,"), ").concat(l.name," (").concat(l.gid,")")),s.select("#stats").attr("x",a-i).attr("y",r-i/2).attr("class","graph-info graph-score").html('\n\t\t\t\t\tAlignment score:\n\t\t\t\t\t<tspan class="match">'.concat(o,'</tspan>\n\t\t\t\t\t\xf7\n\t\t\t\t\t(\n\t\t\t\t\t<tspan class="match">').concat(o,'</tspan>\n\t\t\t\t\t+\n\t\t\t\t\t<tspan class="reference">').concat(c,"</tspan>\n\t\t\t\t\t)\n\t\t\t\t\t= ").concat(R(o/(o+c))))}}},{key:"renderGraph",value:function(){var e=this,t=this.props,n=t.data,r=t.height,a=t.width,i=Object(O.a)(this.root).select("svg");i.attr("height",r).attr("width",a),this.nodes=i.select("#nodes").selectAll("text").data(n.nodes).join("text").text((function(e){return e.name})).each((function(e){var t=this.getBBox();e.width=t.width,e.height=t.height+2})).attr("x",(function(e){return e.x})).attr("y",(function(e){return e.y})).attr("text-anchor",(function(e){return"left"===e.type?"start":"right"===e.type?"end":"middle"})).attr("class",(function(e){var t="node";return e.isMatchingNode?t+=" match":e.isReferenceNode&&(t+=" ref"),t})).attr("opacity",.75).on("mouseover",(function(t){return e.onMouseOverNode(t)})).on("mouseout",(function(t){return e.onMouseOutNode(t)})),this.links=i.select("#links").selectAll("path").data(n.links).join("path").attr("d",this.computePath).attr("marker-end",(function(e){return e.isDirected?"url(#arrowhead)":null})).attr("stroke","#555").attr("fill-opacity",0).attr("opacity",.1),this.includeFooter(n)}},{key:"onMouseOverNode",value:function(e){var t=new Set;this.links.filter((function(t){return t.source===e||t.target===e})).each((function(e){t.add(e.source),t.add(e.target)})).attr("opacity",1),this.nodes.filter((function(e){return t.has(e)})).style("font-weight","bold").attr("opacity",1),this.props.onMouseOverNode&&this.props.onMouseOverNode(e,this.nodes,this.links)}},{key:"onMouseOutNode",value:function(){this.links.attr("opacity",.1),this.nodes.style("font-weight","normal").attr("opacity",.75),Object(O.a)("#synset-tooltip").style("display","none"),this.props.onMouseOutNode&&this.props.onMouseOutNode()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,r=t.width;return a.a.createElement("div",{className:"visualization-container",style:{minWidth:r},ref:function(t){return e.root=t}},n.nodes.length>0?a.a.createElement("svg",null,a.a.createElement("defs",null,a.a.createElement("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"0",refY:"3.5",orient:"auto"},a.a.createElement("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#555"}))),a.a.createElement("g",{id:"nodes"}),a.a.createElement("g",{id:"links"}),a.a.createElement("text",{id:"title"}),a.a.createElement("text",{id:"stats"})):a.a.createElement("h3",{className:"no-data-text"},"No data to show."))}}]),n}(a.a.Component),W=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getRenderingData",value:function(){var e=this.props,t=e.store,n=e.uiState,r=t.graphData,a=n.height-10,i=Math.max(n.width,400),s=Object(I.a)().domain(["left","intermediate","right"]).range([0,i]).padding(.3),o=Object(I.a)().domain(r.nodes.filter((function(e){return"left"===e.type})).sort((function(e,t){return t.outDegree-e.outDegree})).map((function(e){return e.name}))).range([120,a-120]),c=Object(I.a)().domain(r.nodes.filter((function(e){return"right"===e.type})).sort((function(e,t){return t.outDegree-e.outDegree})).map((function(e){return e.name}))).range([120,a-120]),u=Object(I.a)().domain(r.nodes.filter((function(e){return"intermediate"===e.type})).sort((function(e,t){return t.inDegree-e.inDegree})).map((function(e){return e.name}))).range([60,a-60]),l=s("left"),h=s("right"),d=s("intermediate");return r.nodes.forEach((function(e){"left"===e.type?(e.x=l,e.y=o(e.name)):"right"===e.type?(e.x=h,e.y=c(e.name)):(e.x=d,e.y=u(e.name))})),{nodes:r.nodes,links:r.links}}},{key:"render",value:function(){var e=this.props.uiState;return a.a.createElement(T,{data:this.getRenderingData(),framePair:this.props.framePair,height:e.height,width:e.width,margin:60,onMouseOverNode:this.props.onMouseOverNode,onMouseOutNode:this.props.onMouseOutNode})}}]),n}(a.a.Component)),G=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).posRegex=/\.\w{1,4}$/gi,e.onMouseOverNode=function(t,n,r){if("intermediate"===t.type){var a=e.props.store,i=a.synsetData[t.name],s=a.language,o=new Set;r.each((function(t){o.add(t.source.name.replace(e.posRegex,"")),o.add(t.target.name.replace(e.posRegex,""))})),Object(O.a)("#synset-name").html(t.name),Object(O.a)("#synset-desc").html(i.definition),Object(O.a)("#synset-eng-lemmas").html(i.en.map((function(t){return e.lemmaHtml(t,o.has(t))})).join(", ")),Object(O.a)("#synset-l2-title").html("".concat(s,":")),Object(O.a)("#synset-l2-lemmas").html(i[s].map((function(t){return e.lemmaHtml(t,o.has(t))})).join(", "));var c=Object(O.a)("#synset-tooltip");c.style("display","block");var u=c.node().getBoundingClientRect(),l=t.y+t.height/2;l=t.y+u.height>window.innerHeight?t.y-t.height-u.height:t.y+t.height/2,c.style("top","".concat(l,"px")).style("left","".concat(t.x+12,"px"))}},e}return Object(u.a)(n,[{key:"lemmaHtml",value:function(e,t){return t?'<span class="synset-lemma highlighted">'.concat(e,"</span>"):'<span class="synset-lemma">'.concat(e,"</span>")}},{key:"onMouseOutNode",value:function(){Object(O.a)("#synset-tooltip").style("display","none")}},{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.uiState,i=t.framePair;return a.a.createElement("div",{className:"visualization-container",style:{minWidth:r.width},ref:function(t){return e.root=t}},a.a.createElement("div",{id:"synset-graph-content"},a.a.createElement("div",{id:"synset-tooltip"},a.a.createElement("div",{className:"synset-lang-title large",id:"synset-name"}),a.a.createElement("div",{id:"synset-desc"}),a.a.createElement("div",{className:"synset-lang-title"},"eng:"),a.a.createElement("div",{id:"synset-eng-lemmas"}),a.a.createElement("div",{className:"synset-lang-title",id:"synset-l2-title"}),a.a.createElement("div",{id:"synset-l2-lemmas"})),a.a.createElement(W,{store:n,uiState:r,framePair:i,onMouseOverNode:this.onMouseOverNode,onMouseOutNode:this.onMouseOutNode})))}}]),n}(a.a.Component)),H=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"getRenderingData",value:function(){var e=this.props,t=e.store,n=e.uiState,r=t.graphData,a=n.height-10,i=Math.max(n.width,400),s=Object(I.a)().domain(["left","right"]).range([0,i]).padding(.3),o=Object(I.a)().domain(r.nodes.filter((function(e){return"left"===e.type})).sort((function(e,t){return t.outDegree-e.outDegree})).map((function(e){return e.name}))).range([240,a-240]),c=Object(I.a)().domain(r.nodes.filter((function(e){return"right"===e.type})).sort((function(e,t){return t.outDegree-e.outDegree})).map((function(e){return e.name}))).range([240,a-240]),u=s("left"),l=s("right");return r.nodes.forEach((function(e){"left"===e.type?(e.x=u,e.y=o(e.name)):(e.x=l,e.y=c(e.name))})),{nodes:r.nodes,links:r.links}}},{key:"render",value:function(){var e=this.props.uiState;return a.a.createElement(T,{data:this.getRenderingData(),framePair:this.props.framePair,height:e.height,width:e.width,margin:60,onMouseOverNode:this.props.onMouseOutNode,onMouseOutNode:this.props.onMouseOutNode})}}]),n}(a.a.Component)),J=function(){function e(){var t=this;Object(c.a)(this,e),this.isSidebarOpen=!0,this.isAlignmentDetailVisible=!1,this.scoring=null,this.scoringOptions=[],this.sankeyFrames=[],this.selectedFrames=[null,null],this.frameSearchValue="",this.height=null,this.width=null,this.setSelectedFramePair=Object(C.action)((function(e,n){t.selectedFrames[0]=e,t.selectedFrames[1]=n}))}return Object(u.a)(e,[{key:"setScoring",value:function(e){this.scoring=this.scoringOptions.find((function(t){return t.id===e})),this.frameSearchValue=""}},{key:"scoringSelectOptions",get:function(){return this.scoringOptions.map((function(e){return{value:e.id,label:e.desc}}))}}]),e}();Object(C.decorate)(J,{isSidebarOpen:C.observable,isAlignmentDetailVisible:C.observable,scoring:C.observable,scoringOptions:C.observable,sankeyFrames:C.observable,selectedFrames:C.observable,frameSearchValue:C.observable,height:C.observable,width:C.observable,scoringSelectOptions:C.computed});var K=J,Y=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).selectableTypes=["lu_wordnet","synset","synset_inv","lu_muse","fe_matching","lu_bert"],e}return Object(u.a)(n,[{key:"onBackClick",value:function(){this.props.uiState.isAlignmentDetailVisible=!1}},{key:"onEdgeClick",value:function(e,t){var n=this.props.uiState;this.selectableTypes.indexOf(n.scoring.type)>-1&&(n.isAlignmentDetailVisible=!0,n.setSelectedFramePair(e.gid,t.gid))}},{key:"renderMatchingGraph",value:function(){var e=this.props,t=e.store,n=e.uiState;if(n.scoring){var r=n.selectedFrames.map((function(e){return t.frames[e]}));switch(n.scoring.type){case"lu_muse":case"lu_bert":return a.a.createElement(W,{store:t,uiState:n,framePair:r});case"fe_matching":return a.a.createElement(H,{store:t,uiState:n,framePair:r});default:return a.a.createElement(G,{store:t,uiState:n,framePair:r})}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.store,r=t.uiState,i="";return i+=r.isAlignmentDetailVisible?"shift":"no-shift",a.a.createElement("div",{id:"chart-panel-container",className:i},r.isAlignmentDetailVisible&&a.a.createElement("div",{id:"back-button-container",onClick:function(){return e.onBackClick()}},a.a.createElement(f.a,{size:"1.75em"})),a.a.createElement(U,{store:n,uiState:r,onEdgeClick:function(t,n){return e.onEdgeClick(t,n)}}),this.renderMatchingGraph())}}]),n}(a.a.Component)),$=n(76),q=n(70),X=n.n(q),Q=n(72),Z=n.n(Q),ee=(n(106),n(107),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.checked,r=e.disabled,i=e.label,s=e.onChange;return a.a.createElement("div",{className:"checkbox-wrapper form-label"},a.a.createElement("input",{id:t,type:"checkbox",checked:n||!1,onChange:function(e){return s(e.target.checked)},disabled:r}),a.a.createElement("label",{htmlFor:t,style:{marginLeft:6}},i))}}]),n}(a.a.Component)),te=(n(108),n(109),n(110),function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.style;return a.a.createElement("div",{className:"form-label",style:n},t)}}]),n}(a.a.Component)),ne=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"renderLabel",value:function(){var e=this.props.label;if(e)return a.a.createElement(te,null,e)}},{key:"render",value:function(){var e=this.props,t=e.min,n=e.max,r=e.step,i=e.placeholder,s=e.value,o=e.disabled,c=e.onChange,u=e.style;return a.a.createElement(a.a.Fragment,null,this.renderLabel(),a.a.createElement("input",{type:"number",min:t,max:n,step:r,placeholder:i,value:s||"",disabled:o,onChange:function(e){return c(Number(e.target.value))},style:u,className:"numeric-input-wrapper"}))}}]),n}(a.a.Component),re=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.value,r=e.label,i=e.placeholder,s=e.min,o=e.disabled,c=e.onCheckedChange,u=e.onValueChange;return a.a.createElement("div",{className:"checkbox-enable-input-wrapper"},a.a.createElement(ee,{id:"restrict-neighborhood",checked:t,onChange:c,label:r,disabled:o}),a.a.createElement("div",{className:"checkbox-enabled-input-input-wrapper"},a.a.createElement(ne,{min:s,placeholder:i,value:n,disabled:o||!t,onChange:u})))}}]),n}(a.a.Component),ae=(n(111),n(71)),ie=new Worker(n.n(ae).a),se=function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFileChange=function(t){var n=t.target.files[0];n&&(e.props.onFileChange(n),ie.postMessage(n),ie.onmessage=function(t){t.data instanceof Error&&e.setState({error:!0}),e.props.onFileParse(t.data)})},e}return Object(u.a)(n,[{key:"renderError",value:function(){return this.props.error?a.a.createElement("p",{className:"upload-error"},"Error reading input file."):null}},{key:"render",value:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("input",{type:"file",onChange:this.onFileChange}),this.renderError())}}]),n}(a.a.Component),oe=(n(112),Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.disabled,r=e.onChange,i=e.label;return a.a.createElement("div",{className:"slider-container"},a.a.createElement(te,null,i),a.a.createElement("div",{className:"slider-input-container"},a.a.createElement("input",{type:"range",min:0,max:1,step:.001,value:t||"",disabled:n,onChange:function(e){return r(e.target.value)},className:"slider"}),a.a.createElement("input",{type:"number",min:0,max:1,step:"any",value:t||"",disabled:n,onChange:function(e){return r(e.target.value)},className:"slider-text"})))}}]),n}(a.a.Component))),ce=function(e){e.searchPlaceholder;var t=e.onChange,n=e.value;return a.a.createElement("input",{type:"text",className:"multi-select-search",value:n,placeholder:"Search...",onChange:t})},ue=Object(d.a)(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(c.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onFileChange=function(t){return e.props.store.isLoading=!0},e.onFileParse=function(t){t instanceof Error||e.props.store.load(t),e.props.store.isLoading=!1},e.onScoringChange=function(t){return e.props.uiState.setScoring(t.value)},e.onFrameSelectionChange=function(t){return e.props.uiState.sankeyFrames=t},e.updateParam=function(t,n){var r=e.props.uiState;r.scoring&&(r.scoring.params[t]=n)},e.onThresholdChange=function(t){return e.updateParam("threshold",t)},e.onLimitSankeyEdgesChange=function(t){return e.updateParam("limitSankeyEdges",t)},e.onSankeyEdgesMaxChange=function(t){return e.updateParam("sankeyMaxEdges",t)},e.onDisplayOnlyFrameSetChange=function(t){return e.updateParam("displayOnlyFrameSet",t)},e.onNeighborhoodSizeChange=function(t){return e.updateParam("neighborhoodSize",t)},e.onSimilarityThresholdChange=function(t){return e.updateParam("similarityThreshold",t)},e}return Object(u.a)(n,[{key:"renderVectorFields",value:function(){var e=this.props.uiState;if(e.scoring&&"lu_muse"===e.scoring.type){var t=e.scoring.params;return a.a.createElement("div",{className:"sidebar-row"},a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(ne,{min:1,step:1,value:t.neighborhoodSize,onChange:this.onNeighborhoodSizeChange,label:"Vector neighborhood size"})),a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(oe,{label:"Cosine similarity threshold",value:t.similarityThreshold,onChange:this.onSimilarityThresholdChange})))}}},{key:"render",value:function(){var e=this.props,t=e.store,n=e.uiState,r={width:"calc(".concat(n.isSidebarOpen?"550px":"60px"," - 32px)")},i={display:n.isSidebarOpen?"block":"none"},s=n.scoring?n.scoring.params:{};return a.a.createElement("div",{className:"sidebar-container",style:r},a.a.createElement("div",{className:"sidebar-icon-container"},a.a.createElement("div",{onClick:function(){return n.isSidebarOpen=!n.isSidebarOpen},className:"siderbar-icon-click-wrapper"},a.a.createElement(f.b,{size:"1.75em",color:"#3F51B5"}))),a.a.createElement("div",{style:i},a.a.createElement(te,{style:{marginTop:0}},"Alignment file"),a.a.createElement("div",{className:"sidebar-row"},a.a.createElement(se,{onFileChange:this.onFileChange,onFileParse:this.onFileParse}),t.isLoading&&a.a.createElement(Z.a,{size:24,color:"#3F51B5",css:"margin-left: 25px;"})),a.a.createElement("div",{className:"sidebar-row"},a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(te,null,"Scoring technique"),a.a.createElement($.a,{options:n.scoringSelectOptions,onChange:this.onScoringChange,disabled:t.isLoading})),a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(oe,{value:s.threshold,disabled:t.isLoading||!n.scoring,onChange:this.onThresholdChange,label:"Score threshold"}))),this.renderVectorFields(),a.a.createElement("div",{className:"sidebar-row"},a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(re,{checked:s.limitSankeyEdges,value:s.sankeyMaxEdges,disabled:t.isLoading||!n.scoring,onCheckedChange:this.onLimitSankeyEdgesChange,onValueChange:this.onSankeyEdgesMaxChange,min:1,label:"Restrict number of connections of each frame:",placeholder:"Max # of edges for frame"})),a.a.createElement("div",{className:"sidebar-cell"},a.a.createElement(ee,{id:"show-selected-only",checked:s.displayOnlyFrameSet,disabled:t.isLoading||!n.scoring,onChange:this.onDisplayOnlyFrameSetChange,label:"Show ONLY selected frames"}))),a.a.createElement(te,null,"Frame selection"),a.a.createElement(X.a,{items:t.frameOptions,selectedItems:n.sankeyFrames,onChange:this.onFrameSelectionChange,searchRenderer:ce,searchValue:n.frameSearchValue,searchValueChanged:function(e){return n.frameSearchValue=e},responsiveHeight:"350px",itemHeight:30,wrapperClassName:"multi-select-wrapper"})))}}]),n}(a.a.Component)),le=new K,he=new A(le);function de(e,t){le.width=e,le.height=t}var fe=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(ue,{store:he,uiState:le}),a.a.createElement("div",{className:"app-body"},a.a.createElement(Y,{store:he,uiState:le}),a.a.createElement(o.a,{handleWidth:!0,handleHeight:!0,onResize:de})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(fe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},71:function(e,t){var n=function(){self.onmessage=function(e){var t=new FileReader;t.addEventListener("load",(function(e){try{var t=JSON.parse(e.target.result);postMessage(t)}catch(n){postMessage(n)}})),t.readAsBinaryString(e.data)}}.toString();n=n.substring(n.indexOf("{")+1,n.lastIndexOf("}"));var r=new Blob([n],{type:"application/javascript"}),a=URL.createObjectURL(r);e.exports=a},85:function(e,t,n){e.exports=n(115)},90:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},95:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.3b421aab.chunk.js.map